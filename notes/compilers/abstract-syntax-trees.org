* Abstract Syntax Trees

*Introduction to Language Design and Compilers*, Douglas Thain

** B-Minor Syntax Tree

#+begin_example
// === function ===

compute: function integer (x: integer) = {
    i: integer;
    total: integer = 0;
    for (i = 0; i < 10; i++) {
        total = total + i;
    }
    return total;
}

// === Abstract Syntax Tree ===

                           ----------------------------
                          | DECL "compute"             |
                          |----------------------------|
                          | type | value | code | next |
                           ----------------------------
                          ____|              |
                         |                   |
          ------------------              ---------------------------------------------------------------
         | TYPE_FUNCTION    |            | STMT_DECL                                                     |
         |------------------|            |---------------------------------------------------------------|
         | subtype | params |            | decl | init_expr | expr | next_expr | body | else_body | next |
          ------------------              ---------------------------------------------------------------
             |         |                      |                                                      |
 ------------------   --------------------   ----------------------------   -------------------------------------------------------------- 
| TYPE_INTEGER     | | PARAM              | | DECL "i"                   | | STMT_DECL                                                     |
|------------------| |--------------------| |----------------------------| |---------------------------------------------------------------|
| subtype | params | | name | type | next | | type | value | code | next | | decl | init_expr | expr | next_expr | body | else_body | next |
 ------------------   --------------------   ----------------------------   ---------------------------------------------------------------
                      ____|      |               |                              |                                  _____________________|
                     |           |               |                              |                                 |
                   -----   ------------------   ------------------           ----------------------------         |
                  | "x" | | TYPE_INTEGER     | | TYPE_INTEGER     |         | DECL "total"               |        |
                   -----  |------------------| |------------------|         |----------------------------|        |
                          | subtype | params | | subtype | params |         | type | value | code | next |        |
                           ------------------   ------------------           ----------------------------         |
                                                                               |        |____                     |
                                                                               |             |                    |
                                                                    ------------------   --------------           |
                                                                   | TYPE_INTEGER     | | EXPR_INTEGER |          |
                                                                   |------------------| |--------------|          |
                                                                   | subtype | params | | 0            |          |
                                                                    ------------------   --------------           |
                                                            ---------------------------------------------------------------
                                                           | STM_FOR                                                       |
                                                           |---------------------------------------------------------------|
                                                           | decl | init_expr | expr | next_expr | body | else_body | next |
                                                            ---------------------------------------------------------------
                                                       _______________|     _____|        |           |__________      |
                                                      |                    |              |                      |     |
                                           --------------          --------------   --------------               |     |
                                          | EXPR_ASSIGN  |        | EXPR_LT      | | EXPR_INC     |              |     |_____________
                                          |--------------|        |--------------| |--------------|              |                   |
                                          | left | right |        | left | right | | left | right |              |                   |
                                           --------------          --------------   --------------               |                   |
                                         ____|      |                __|    |______     |__________              |                   |
                                        |           |               |              |               |             |                   |
                                  -----------   --------------    -----------   --------------   -----------     |                   |
                                 | EXPR_NAME | | EXPR_INTEGER |  | EXPR_NAME | | EXPR_INTEGER | | EXPR_NAME |    |                   |
                                 |-----------| |--------------|  |-----------| |--------------| |-----------|    |                   |
                                 | i         | | 0            |  | i         | | 10           | | i         |    |                   |
                                  -----------   --------------    -----------   --------------   -----------     |                   |
                                                        ---------------------------------------------------------------              |
                                                       | STMT_BLOCK                                                    |             |
                                                       |---------------------------------------------------------------|             |
                                                       | decl | init_expr | expr | next_expr | body | else_body | next |             |
                                                        ---------------------------------------------------------------              |
                                                                                                 |                                   |
                                                              ---------------------------------------------------------------        |
                                                             | STMT_EXPR                                                     |       |
                                                             |---------------------------------------------------------------|       |
                                                             | decl | init_expr | expr | next_expr | body | else_body | next |       |
                                                              ---------------------------------------------------------------        |
                                                                                   |                                                 |
                                                                            --------------    ---------------------------------------------------------------
                                                                           | EXPR_ASSIGN  |  | STMT_RETURN                                                   |
                                                                           |--------------|  |---------------------------------------------------------------|
                                                                           | left | right |  | decl | init_expr | expr | next_expr | body | else_body | next |
                                                                            --------------    ---------------------------------------------------------------
                                                                              |       |                            |
                                                                      -----------   --------------            -----------     
                                                                     | EXPR_NAME | | EXPR_ADD     |          | EXPR_NAME |
                                                                     |-----------| |--------------|          |-----------|
                                                                     | total     | | left | right |          | total     |
                                                                      -----------   --------------            -----------
                                                                                   ___|       |
                                                                                  |           |
                                                                             -----------   -----------     
                                                                            | EXPR_NAME | | EXPR_NAME |
                                                                            |-----------| |-----------|
                                                                            | total     | | i         |
                                                                             -----------   ----------- 
#+end_example
